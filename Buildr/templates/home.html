{% extends 'base.html' %}
{% load static from staticfiles %}
{% block content %}
<div><img src="{% static 'images/banner.png'%}" style="width: 100%; height: 500px; object-fit: contain ;"></img></div>
<nav class="uk-navbar-container uk-navbar-transparent " uk-navbar>   
    <div class="uk-navbar-center uk-visible@s">
        <div>
            <ul class="uk-navbar-nav">
                <li class="uk-navbar-item {% if request.path == '/products/rams' %}uk-active{% endif %}"><a href="/products/ram">RAMS</a></li>
                <li class="uk-navbar-item {% if request.path == '/products/cpu' %}uk-active{% endif %}"><a href="/products/cpu">PROCESSORS</a></li>
                <li class="uk-navbar-item {% if request.path == '/' %}uk-active{% endif %}"><a href="/">ALL</a></li>
                <li class="uk-navbar-item {% if request.path == '/products/gpu' %}uk-active{% endif %}"><a href="/products/gpu">GRAPHIC CARDS</a></li>
                <li class="uk-navbar-item {% if request.path == '/products/mobo' %}uk-active{% endif %}"><a href="/products/mobo">MOTHERBOARDS</a></li>
            </ul>
        </div>
    </div>
</nav>
<nav class="uk-navbar-container uk-navbar-transparent" uk-navbar>
    <form class="uk-navbar-center" action="" method="POST">{% csrf_token %}
            <select name = "sort" class="uk-select" onchange="this.form.submit()">
                <option {% if sortvalue == 0 %}selected{% endif %} disabled value="0">Sort by</option>
                <option {% if sortvalue == 1 %}selected{% endif %} value="1">Price - ASC</option>
                <option {% if sortvalue == 2 %}selected{% endif %} value="2">Price - DESC</option>
                <option {% if sortvalue == 3 %}selected{% endif %} value="3">Title - ASC</option>
                <option {% if sortvalue == 4 %}selected{% endif %} value="4">Title - DESC</option>
            </select>
    </form>
</nav>
<!-- Thank god https://stackoverflow.com/a/22466415 for the perfect solution to iterating over the list and creating only 4 items -->
{% for product in all_products %}
{% if forloop.first %}<div class="uk-grid-match uk-child-width-expand@s uk-text-center uk-margin-left uk-margin-right uk-margin-top" uk-grid>{% endif %}
    <div>
        <a href="/product/{{product.category|lower}}/{{product.id}}/" class="uk-link-muted"><div class="uk-card uk-card-hover uk-card-default uk-card-body" uk-scrollspy="cls: uk-animation-slide-left; repeat: true">
            <div class="uk-card-header" style="width:auto;height:7em">
                <img style="object-fit:contain; width: inherit; height: inherit;" src="{{product.image}}">
            </div>
            <div class="uk-card-body">
                <p>{{product.title|truncatechars:40 }}</p>
            </div>
            <div class="uk-card-footer">
                <p class="uk-text-meta uk-align-center" >Lowest price</p>
                <h2>{{product.min_price}}</h2>
            </div>
        </div></a>
     </div>
    {% if forloop.counter|divisibleby:4 %}</div><div class="uk-grid-match uk-child-width-expand@s uk-text-center uk-margin-left uk-margin-right uk-margin-top" uk-grid>{% endif %}
    {% if forloop.last %}</div>{% endif %}
{% endfor %}
{% endblock %}
